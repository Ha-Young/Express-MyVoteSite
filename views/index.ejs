<!DOCTYPE html>
<html>
  <head>
    <title>INDEX</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='/stylesheets/index.css' />
  </head>
  <body>
    <%- include('header') %>
    <div id='body-container'>
      <div class='table-container'>
        <table class='voting-list-table'>
          <tr>
            <th>Title</th>
            <th>Creator</th>
            <th>End time</th>
            <th>Status</th>
          </tr>
          <% votings.map(voting => { %>
            <tr>
              <td>
                <a href=<%=`/votings/${voting._id}`%>>
                  <%= voting.title %>
                </a>
              </td>
              <td><%= voting.authorName %></td>
              <td>
                <%= new Date(voting.end_time).toString().substring(0,34) %>
              </td>
              <td>
                <% if (voting.status === 'active') { %>
                  <span class='ongoing-text'>üó≥Ô∏è Ongoing</span>
                <% } else if (voting.status === 'ended') { %>
                  <span class='finished-text'>üì¶ Finished</span>
                <% } %>
              </td>
            </tr>
          <% }) %>
        </table>
      </div>
      <div id='create-button-container'>
        <a href="/votings/new">
          <button class='primary-button'>
            Create a new voting
          </button>  
        </a>
      </div>
    </div>
  </body>
</html>
