<!DOCTYPE html>
<html>

<head>
  <title>voting</title>
</head>

<body>
  <div>
    <h1>투표 페이지</h1>

    <div>
      <ul>
        <li>제목: <%= voting.title %></li>
        <li>작성자: <%= voting.author %></li>
        <li>만료 날짜: <%= new Date(voting.endDate) %></li>
        <% if (status) { %>
        <li>진행 여부:<span>진행중</span>
          <% } else { %>
        <li>진행 여부:<span>기간 만료</span></li>
        <% } %>
      </ul>
    </div>

    <div>
      <% if (status) { %>
      <form action=<%= `/votings/${voting._id}` %> method='POST'>
        <% voting.items.map(item =>{ %>
        <label>
          <input type='radio' name='itemId' value='<%= item._id %>'><%= item.name %>
        </label>
        <% }) %>
        <input type='submit' value='투표하기'>
      </form>
      <% } %>
      <% if (!status || isAuthor) { %>
      <ul>
        <% voting.items.forEach(item => { %>
        <li><%= `${item.name}: ${item.count}표` %></li>
        <% }) %>
        <% } %>
      </ul>
    </div>

    <div>
      <% if (isAuthor) { %>
      <button class='deleteVoting' data-id='<%= voting._id %>'>투표 삭제</button>
      <% } %>
      <button><a href='/'>목록 보기</a></button>
    </div>
  </div>
  <script src='/javascripts/voting.js'></script>
</body>

</html>
